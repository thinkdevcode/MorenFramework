////////////////////////////////////////////////////////////
//
// Moren - 2D RPG Framework
// Copyright (C) 2009 Eugene Alfonso (gin@gtproductions.org)
//
// This software is provided 'as-is', without any express or implied warranty.
// In no event will the authors be held liable for any damages arising from the use of this software.
//
////////////////////////////////////////////////////////////

#ifndef MOREN_IMAGEBUTTON_HPP
#define MOREN_IMAGEBUTTON_HPP

////////////////////////////////////////////////////////////
// Headers
//
////////////////////////////////////////////////////////////
#include <math.h>
#include "../Base/GUIObject.hpp"

namespace Moren
{

////////////////////////////////////////////////////////////
/// An ImageButton is a sprite with button capabilities
///
////////////////////////////////////////////////////////////
class ImageButton : public GUIObject
{
public:

	////////////////////////////////////////////////////////////
	/// Default constructor
	///
	/// \param Coords :       Coords of ImageButton (center)
	/// \param Image :        Reference to the button's image
	///
	////////////////////////////////////////////////////////////
	ImageButton( Vector2f Coords, Image& Image );

	////////////////////////////////////////////////////////////
	/// /see GUIObject::Update
	///
	////////////////////////////////////////////////////////////
	void Update();

	////////////////////////////////////////////////////////////
	/// /see GUIObject::ProcessEvent
	///
	////////////////////////////////////////////////////////////
	void ProcessEvent(Event& EventPacket);

	////////////////////////////////////////////////////////////
	/// /see Drawable::Render
	///
	////////////////////////////////////////////////////////////
	void Render(RenderTarget& Target, RenderQueue& queue);

	////////////////////////////////////////////////////////////
	// GUI Events
	//
	////////////////////////////////////////////////////////////
	virtual void OnRightClick() =0;
	virtual void OnLeftClick() =0;
	virtual void OnMouseOver() =0;
	virtual void OnMouseOff() =0;

	////////////////////////////////////////////////////////////
	/// Overloaded '=' operator, needed for error
	///
	////////////////////////////////////////////////////////////
	ImageButton& operator=(const ImageButton& U);

private:

	bool Inside();

	////////////////////////////////////////////////////////////
	// Member data
	//
	////////////////////////////////////////////////////////////
	Image&	myImage;			///< Reference to Image of button
	Sprite	mySprite;			///< Sprite of button
	bool	myMouseStatusNew;	///< Is mouse over the button
	bool	myMouseStatusOld;	///< Mouse flag changed
};

} // namespace Moren

#endif // MOREN_IMAGEBUTTON_HPP